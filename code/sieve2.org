#+TITLE: Sieve of Sundaram for Term Paper

#+BEGIN_SRC python :session
from math import ceil

def Sundaram(n):
    composites = set()
    bound = int(ceil((n-2)/2))
    for i in range(1, bound):
        for j in range(i, int(ceil((n-i)/(1+2*i)))):
            composites.add(2*i*j+i+j)
    
    return [2*a+1 for a in range(1,bound) if a not in composites]
#+END_SRC

#+RESULTS:

#+BEGIN_SRC python :session :results output
print(Sundaram(150))
#+END_SRC

#+RESULTS:
: [3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139]

#+BEGIN_SRC python :session
import time
def time_algo(algo, n):
    start = time.time()
    algo(n)
    end = time.time()
    return end-start

#+END_SRC

#+RESULTS:

#+BEGIN_SRC python :session
def time_trial(algo, iterbl):
    avgtimes = []
    for i in iterbl:
        totaltime = 0
        for j in range(50):
            totaltime += time_algo(algo, i)
        avgtimes.append(totaltime/50)
    return [iterbl, avgtimes]
#+END_SRC

#+RESULTS:

#+BEGIN_SRC python :session
time_trial(Sundaram, range(1000, 100000, 1000))
#+END_SRC
#+name: table
#+RESULTS:
|  1000 |  0.001655244827270508 |
|  2000 | 0.0035030269622802735 |
|  3000 |  0.005409808158874512 |
|  4000 |  0.007370343208312988 |
|  5000 |  0.009321436882019044 |
|  6000 |  0.011406359672546386 |
|  7000 |  0.013421578407287598 |
|  8000 |    0.0156807279586792 |
|  9000 |   0.01781235694885254 |
| 10000 |  0.019989328384399416 |
| 11000 |  0.022003612518310546 |
| 12000 |  0.024109435081481934 |
| 13000 |   0.02625467300415039 |
| 14000 |   0.02848233699798584 |
| 15000 |  0.030702543258666993 |
| 16000 |  0.032762494087219235 |
| 17000 |   0.03496235847473145 |
| 18000 |    0.0372356367111206 |
| 19000 |   0.03946885585784912 |
| 20000 |  0.041627326011657716 |
| 21000 |   0.04387703895568848 |
| 22000 |   0.04606656074523926 |
| 23000 |  0.048517856597900394 |
| 24000 |   0.05077483177185058 |
| 25000 |   0.05320342063903809 |
| 26000 |  0.055410146713256836 |
| 27000 |   0.05761642456054687 |
| 28000 |   0.06071690082550049 |
| 29000 |   0.06286163806915283 |
| 30000 |    0.0660411548614502 |
| 31000 |   0.06776083469390869 |
| 32000 |   0.07009020328521728 |
| 33000 |   0.07287849426269531 |
| 34000 |   0.07520180702209472 |
| 35000 |   0.07765526294708253 |
| 36000 |   0.08075870513916016 |
| 37000 |   0.08459084033966065 |
| 38000 |   0.08801867961883544 |
| 39000 |   0.08813653469085693 |
| 40000 |    0.0903691005706787 |
| 41000 |   0.09155237674713135 |
| 42000 |   0.09463079452514649 |
| 43000 |   0.09684730529785156 |
| 44000 |   0.09919172763824463 |
| 45000 |   0.10188043594360352 |
| 46000 |   0.10400237560272217 |
| 47000 |   0.10639989376068115 |
| 48000 |   0.10894830703735352 |
| 49000 |    0.1115085506439209 |
| 50000 |   0.11396571159362794 |
| 51000 |   0.11677157402038574 |
| 52000 |   0.11916997909545898 |
| 53000 |   0.12203265190124511 |
| 54000 |   0.12409028053283691 |
| 55000 |   0.12705374240875245 |
| 56000 |    0.1306898069381714 |
| 57000 |   0.13289084434509277 |
| 58000 |   0.13396390914916992 |
| 59000 |   0.13658733367919923 |
| 60000 |   0.13901952743530274 |
| 61000 |    0.1417265224456787 |
| 62000 |   0.14426057338714598 |
| 63000 |   0.14707579612731933 |
| 64000 |   0.14992805004119872 |
| 65000 |   0.15215267658233642 |
| 66000 |    0.1553481388092041 |
| 67000 |   0.15738342761993407 |
| 68000 |   0.16032904624938965 |
| 69000 |   0.16335853099822997 |
| 70000 |    0.1669243860244751 |
| 71000 |   0.16869393348693848 |
| 72000 |     0.171148943901062 |
| 73000 |   0.17423500061035158 |
| 74000 |   0.17651155471801758 |
| 75000 |    0.1789701509475708 |
| 76000 |    0.1815439558029175 |
| 77000 |   0.18473294734954834 |
| 78000 |   0.18763411521911622 |
| 79000 |    0.1900455904006958 |
| 80000 |   0.19296250343322754 |
| 81000 |    0.1975352382659912 |
| 82000 |   0.19916977882385253 |
| 83000 |   0.20208057403564453 |
| 84000 |   0.20468930244445802 |
| 85000 |   0.20828485012054443 |
| 86000 |   0.21041875839233398 |
| 87000 |    0.2131698513031006 |
| 88000 |    0.2178872346878052 |
| 89000 |   0.22139361381530762 |
| 90000 |   0.22235804080963134 |
| 91000 |   0.22491427421569823 |
| 92000 |    0.2274065160751343 |
| 93000 |    0.2306690502166748 |
| 94000 |   0.23541738986968994 |
| 95000 |   0.23666426181793213 |
| 96000 |    0.2398967409133911 |
| 97000 |   0.24222174644470215 |
| 98000 |   0.24596909999847413 |
| 99000 |   0.24986233711242675 |

#+BEGIN_SRC gnuplot :var data=table :file sund2.png
reset
plot data using 1:2 with lines title 'Running Time (seconds)';
#+END_SRC

#+RESULTS:
[[file:sund2.png]]

