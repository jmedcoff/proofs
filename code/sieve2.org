#+TITLE: Sieve of Sundaram for Term Paper

#+BEGIN_SRC python :session
from math import ceil

def Sundaram(n):
    composites = set()
    bound = int(ceil((n-2)/2))
    for i in range(1, bound):
        for j in range(i, int(ceil((n-i)/(1+2*i)))):
            composites.add(2*i*j+i+j)
    
    return [2*a+1 for a in range(1,bound) if a not in composites]
#+END_SRC

#+RESULTS:

#+BEGIN_SRC python :session :results output
print(Sundaram(100))
#+END_SRC

#+RESULTS:
: [3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97]

#+BEGIN_SRC python :session
import time
def time_algo(algo, n):
    start = time.time()
    algo(n)
    end = time.time()
    return end-start

#+END_SRC

#+RESULTS:

#+BEGIN_SRC python :session
def time_trial(algo, iterbl):
    avgtimes = []
    for i in iterbl:
        totaltime = 0
        for j in range(50):
            totaltime += time_algo(algo, i)
        avgtimes.append(totaltime/50)
    return [iterbl, avgtimes]
#+END_SRC

#+RESULTS:

#+BEGIN_SRC python :session
time_trial(Sundaram, range(1000, 100000, 1000))
#+END_SRC
#+name: table
#+RESULTS:
|  1000 |  0.001592531204223633 |
|  2000 | 0.0033945465087890626 |
|  3000 |    0.0053094482421875 |
|  4000 |  0.007136993408203125 |
|  5000 |    0.0090647554397583 |
|  6000 |  0.011030406951904296 |
|  7000 |  0.013060941696166992 |
|  8000 |  0.015224637985229493 |
|  9000 |  0.017256512641906738 |
| 10000 |  0.019406304359436036 |
| 11000 |   0.02136414051055908 |
| 12000 |   0.02356203079223633 |
| 13000 |   0.02555738925933838 |
| 14000 |  0.027768421173095702 |
| 15000 |  0.029951930046081543 |
| 16000 |  0.031927328109741214 |
| 17000 |   0.03413193225860596 |
| 18000 |  0.036313924789428714 |
| 19000 |   0.03854981899261475 |
| 20000 |   0.04059546947479248 |
| 21000 |  0.042839064598083496 |
| 22000 |   0.04511015415191651 |
| 23000 |    0.0473227596282959 |
| 24000 |   0.04940831661224365 |
| 25000 |   0.05144474506378174 |
| 26000 |   0.05382153034210205 |
| 27000 |   0.05587209224700928 |
| 28000 |    0.0591959285736084 |
| 29000 |  0.061267857551574705 |
| 30000 |   0.06358005046844482 |
| 31000 |   0.06592792510986328 |
| 32000 |   0.06836599826812745 |
| 33000 |   0.07094793319702149 |
| 34000 |   0.07306919574737548 |
| 35000 |   0.07516817092895507 |
| 36000 |   0.07719297885894776 |
| 37000 |   0.07969531059265136 |
| 38000 |   0.08184195041656495 |
| 39000 |   0.08427001476287842 |
| 40000 |   0.08658389568328857 |
| 41000 |    0.0890457010269165 |
| 42000 |   0.09091591358184814 |
| 43000 |   0.09360742092132568 |
| 44000 |   0.09585129261016846 |
| 45000 |   0.09813927173614502 |
| 46000 |   0.10086299896240235 |
| 47000 |   0.10311553955078125 |
| 48000 |   0.10541793823242188 |
| 49000 |   0.10793850898742675 |
| 50000 |   0.11011106491088868 |
| 51000 |   0.11264264583587646 |
| 52000 |   0.11550016403198242 |
| 53000 |   0.11723949909210205 |
| 54000 |   0.11942623138427734 |
| 55000 |   0.12206077575683594 |
| 56000 |   0.12440176486968994 |
| 57000 |    0.1275535774230957 |
| 58000 |    0.1289190912246704 |
| 59000 |    0.1315376043319702 |
| 60000 |    0.1339562702178955 |
| 61000 |   0.13623122215270997 |
| 62000 |    0.1387940788269043 |
| 63000 |   0.14094047546386718 |
| 64000 |   0.14346700191497802 |
| 65000 |   0.14591219425201415 |
| 66000 |   0.14841325759887694 |
| 67000 |   0.15055463314056397 |
| 68000 |   0.15301290035247803 |
| 69000 |   0.15520044803619384 |
| 70000 |   0.15790281295776368 |
| 71000 |    0.1602001190185547 |
| 72000 |    0.1629792594909668 |
| 73000 |   0.16503026485443115 |
| 74000 |   0.17497275352478028 |
| 75000 |   0.16987271785736083 |
| 76000 |   0.17270045280456542 |
| 77000 |    0.1748609447479248 |
| 78000 |   0.17702500343322755 |
| 79000 |   0.17982311248779298 |
| 80000 |   0.18251513957977294 |
| 81000 |   0.18495323181152343 |
| 82000 |   0.18716666221618652 |
| 83000 |   0.18950304985046387 |
| 84000 |   0.19209924697875977 |
| 85000 |   0.19389791965484618 |
| 86000 |    0.1973504877090454 |
| 87000 |   0.20034771919250488 |
| 88000 |   0.20185813426971436 |
| 89000 |   0.20438465118408203 |
| 90000 |    0.2067892360687256 |
| 91000 |   0.21130258083343506 |
| 92000 |   0.21172524452209474 |
| 93000 |   0.21453860759735108 |
| 94000 |    0.2168503761291504 |
| 95000 |   0.21967456817626954 |
| 96000 |    0.2220228099822998 |
| 97000 |   0.22442105293273926 |
| 98000 |   0.22749325275421142 |
| 99000 |   0.22942748069763183 |

#+BEGIN_SRC gnuplot :var data=table :file sund.png
reset
plot data using 1:2 with lines title 'Running Time (seconds)';
#+END_SRC

#+RESULTS:
[[file:sund.png]]

